[{"/Users/wendymichels/WebstormProjects/greenery/src/index.js":"1","/Users/wendymichels/WebstormProjects/greenery/src/reportWebVitals.js":"2","/Users/wendymichels/WebstormProjects/greenery/src/App.js":"3","/Users/wendymichels/WebstormProjects/greenery/src/context/AuthContext.js":"4","/Users/wendymichels/WebstormProjects/greenery/src/pages/Profile.js":"5","/Users/wendymichels/WebstormProjects/greenery/src/pages/SignUp.js":"6","/Users/wendymichels/WebstormProjects/greenery/src/pages/SignIn.js":"7","/Users/wendymichels/WebstormProjects/greenery/src/pages/Home.js":"8","/Users/wendymichels/WebstormProjects/greenery/src/components/Header.js":"9","/Users/wendymichels/WebstormProjects/greenery/src/components/AvatarUploader.js":"10"},{"size":742,"mtime":1611253274566,"results":"11","hashOfConfig":"12"},{"size":362,"mtime":1611252598227,"results":"13","hashOfConfig":"12"},{"size":1120,"mtime":1611260153791,"results":"14","hashOfConfig":"12"},{"size":1509,"mtime":1613213024490,"results":"15","hashOfConfig":"12"},{"size":860,"mtime":1613298644121,"results":"16","hashOfConfig":"12"},{"size":3348,"mtime":1613213098267,"results":"17","hashOfConfig":"12"},{"size":2389,"mtime":1613212692265,"results":"18","hashOfConfig":"12"},{"size":708,"mtime":1613213024476,"results":"19","hashOfConfig":"12"},{"size":1607,"mtime":1613213341410,"results":"20","hashOfConfig":"12"},{"size":2033,"mtime":1613466799977,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"5l6vyn",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"24"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"24"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/wendymichels/WebstormProjects/greenery/src/index.js",[],["47","48"],"/Users/wendymichels/WebstormProjects/greenery/src/reportWebVitals.js",[],"/Users/wendymichels/WebstormProjects/greenery/src/App.js",[],"/Users/wendymichels/WebstormProjects/greenery/src/context/AuthContext.js",["49"],"import React, { createContext, useContext, useEffect, useState } from 'react';\n\nconst AuthContext = createContext({});\n\nfunction AuthContextProvider({ children }) {\n    const [authState, setAuthState] = useState({\n        status: 'pending',\n        error: null,\n        user: null,\n    })\n\n    useEffect(() => {\n\n        setTimeout(() => {\n            setAuthState({\n                ...authState,\n                status: 'done',\n            })\n        }, 2000)\n    }, []);\n\n    function login(data) {\n        localStorage.setItem('token', data.accessToken);\n\n        setAuthState({\n            ...authState,\n            user: {\n                username: data.username,\n                email: data.email,\n                roles: data.roles,\n            }\n        })\n\n    }\n\n    function logout() {\n\n        localStorage.clear();\n        setAuthState({\n            ...authState,\n            user: null,\n        })\n    }\n\n    return (\n        <AuthContext.Provider value={{ ...authState, login, logout }}>\n            {authState.status === 'done' && children}\n            {authState.status === 'pending' && <p>Loading...</p>}\n        </AuthContext.Provider>\n    );\n}\n\nfunction useAuthState() {\n    const authState = useContext(AuthContext);\n\n\n    const isDone = authState.status === 'done';\n    const isAuthenticated = authState.user !== null && isDone;\n\n\n    return {\n        ...authState,\n        isAuthenticated: isAuthenticated,\n    }\n}\n\nexport {\n    AuthContext,\n    useAuthState,\n    AuthContextProvider,\n}\n","/Users/wendymichels/WebstormProjects/greenery/src/pages/Profile.js",[],"/Users/wendymichels/WebstormProjects/greenery/src/pages/SignUp.js",[],"/Users/wendymichels/WebstormProjects/greenery/src/pages/SignIn.js",["50","51"],"import React, { useState, useContext, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { AuthContext, useAuthState } from '../context/AuthContext';\nimport { ReactComponent as Spinner } from '../assets/refresh.svg';\n\nfunction SignIn() {\n    const { login } = useContext(AuthContext);\n    const { isAuthenticated } = useAuthState();\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n\n    const [loading, toggleLoading] = useState(false);\n    const [error, setError] = useState('');\n\n    const history = useHistory();\n\n    useEffect(() => {\n        if (isAuthenticated === true) {\n            history.push('/profile');\n        }\n    }, [isAuthenticated]);\n\n    async function onSubmit(event) {\n        toggleLoading(true);\n        setError('');\n\n        event.preventDefault();\n\n        try {\n            const response = await axios.post('http://localhost:8080/api/auth/signin', {\n                username: username,\n                password: password,\n            })\n\n            login(response.data);\n        } catch(e) {\n            console.error(e);\n            setError('Login failed');\n        }\n        toggleLoading(false);\n    }\n\n    return (\n        <>\n            <h1>Login</h1>\n\n            <form onSubmit={onSubmit}>\n                <label htmlFor=\"username-field\">\n                    Username:\n                    <input\n                        type=\"text\"\n                        id=\"username-field\"\n                        value={username}\n                        onChange={(e) => setUsername(e.target.value)}\n                    />\n                </label>\n\n                <label htmlFor=\"password-field\">\n                    Password:\n                    <input\n                        type=\"password\"\n                        id=\"password-field\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)} />\n                </label>\n                <button\n                    type=\"submit\"\n                    className=\"form-button\"\n                    disabled={loading}\n                >\n                    {loading ? <Spinner className=\"loading-icon\" /> : 'Login'}\n                </button>\n                {error && <p>{error}</p>}\n            </form>\n        </>\n    );\n}\n\nexport default SignIn;\n","/Users/wendymichels/WebstormProjects/greenery/src/pages/Home.js",["52","53"],"import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { AuthContext, useAuthState } from '../context/AuthContext';\n\nfunction Home() {\n    const { isAuthenticated } = useAuthState();\n    console.log(isAuthenticated);\n\n\n    return (\n        <>\n            <h1>Homepage</h1>\n            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab alias cum debitis dolor dolore fuga id molestias qui quo unde?</p>\n            <p>If you are logged-in check out your <Link to=\"/profile\">Profile Page</Link></p>\n            <p><Link to=\"/signin\">Login</Link> or <Link to=\"/signup\">Register</Link> if you don't have an account</p>\n        </>\n    );\n}\n\nexport default Home;\n","/Users/wendymichels/WebstormProjects/greenery/src/components/Header.js",["54"],"import React, { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext, useAuthState } from '../context/AuthContext';\n\nfunction Header() {\n    const history = useHistory();\n\n    const { isAuthenticated } = useAuthState();\n    const { logout } = useContext(AuthContext);\n\n    useEffect(() => {\n        if (isAuthenticated === false) {\n            history.push('/signin');\n        }\n    }, [isAuthenticated]);\n\n    return (\n        <header>\n            <div>\n                {isAuthenticated ? (\n                    <button\n                        type=\"button\"\n                        onClick={() => logout()}\n                    >\n                        Logout\n                    </button>\n                ) : (\n                    <>\n                        <button\n                            type=\"button\"\n                            onClick={() => history.push('/signin')}\n                        >\n                            Signin\n                        </button>\n                        <button\n                            type=\"button\"\n                            onClick={() => history.push('/signup')}\n                        >\n                            Register\n                        </button>\n                        <button\n                            type=\"button\"\n                            onClick={() => history.push('/')}\n                        >\n                            Home\n                        </button>\n                    </>\n                )}\n            </div>\n        </header>\n    );\n};\n\nexport default Header;\n","/Users/wendymichels/WebstormProjects/greenery/src/components/AvatarUploader.js",[],{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":20,"column":8,"nodeType":"61","endLine":20,"endColumn":10,"suggestions":"62"},{"ruleId":"63","severity":1,"message":"64","line":2,"column":10,"nodeType":"65","messageId":"66","endLine":2,"endColumn":14},{"ruleId":"59","severity":1,"message":"67","line":23,"column":8,"nodeType":"61","endLine":23,"endColumn":25,"suggestions":"68"},{"ruleId":"63","severity":1,"message":"69","line":1,"column":17,"nodeType":"65","messageId":"66","endLine":1,"endColumn":27},{"ruleId":"63","severity":1,"message":"70","line":3,"column":10,"nodeType":"65","messageId":"66","endLine":3,"endColumn":21},{"ruleId":"59","severity":1,"message":"67","line":15,"column":8,"nodeType":"61","endLine":15,"endColumn":25,"suggestions":"71"},"no-native-reassign",["72"],"no-negated-in-lhs",["73"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'authState'. Either include it or remove the dependency array. You can also do a functional update 'setAuthState(a => ...)' if you only need 'authState' in the 'setAuthState' call.","ArrayExpression",["74"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["75"],"'useContext' is defined but never used.","'AuthContext' is defined but never used.",["76"],"no-global-assign","no-unsafe-negation",{"desc":"77","fix":"78"},{"desc":"79","fix":"80"},{"desc":"79","fix":"81"},"Update the dependencies array to be: [authState]",{"range":"82","text":"83"},"Update the dependencies array to be: [history, isAuthenticated]",{"range":"84","text":"85"},{"range":"86","text":"85"},[468,470],"[authState]",[748,765],"[history, isAuthenticated]",[439,456]]